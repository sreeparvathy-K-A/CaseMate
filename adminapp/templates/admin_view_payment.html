{% extends 'adminnav.html' %}

{% block stylecontent %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
    body {
        font-family: 'Roboto', sans-serif;
        background-color: #f7f7f7;
        color: #333;
    }

    .container {
        margin-top: 50px;
    }

    h1 {
        text-align: center;
        margin-bottom: 20px;
        font-weight: bold;
        color: #2c3e50;
    }

    .section {
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        padding: 20px;
        margin-bottom: 30px;
        transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
    }

    .section:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
    }

    .table {
        width: 100%;
        margin-top: 20px;
    }

    .table th {
        background-color: #2c3e50;
        color: white;
        text-align: center;
        padding: 10px;
    }

    .table td {
        text-align: center;
        padding: 10px;
        background-color: #f9f9f9;
    }

    .status-badge {
        font-size: 14px;
        font-weight: bold;
        padding: 5px 10px;
        border-radius: 5px;
    }

    .status-completed {
        background-color: #28a745;
        color: white;
    }

    .status-pending {
        background-color: #e74c3c;
        color: white;
    }

    .profile-photo {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #2c3e50;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <h1>Payment Management Dashboard</h1>

    <!-- Premium User List -->
    <div class="section">
        <h2 class="text-center">Premium Users</h2>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Client Name</th>
                    <th>Email</th>
                    <th>Purchased On</th>
                </tr>
            </thead>
            <tbody>
                {% for user in premium_users %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ user.client.name }}</td>
                    <td>{{ user.client.login.email }}</td>
                    <td>{{ user.purchased_on|date:"Y-m-d " }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4">No premium users found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Payment Completed Advocates -->
    <div class="section">
        <h2 class="text-center">Payment Completed Advocates</h2>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Advocate</th>
                    <th>Photo</th>
                    <th>Phone</th>
                    <th>Category</th>
                    <th>City</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for advocate in completed_advocates %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ advocate.name }}</td>
                    <td><img src="{{ advocate.photo.url }}" class="profile-photo" alt="Advocate Photo"></td>
                    <td>{{ advocate.phone_number }}</td>
                    <td>{{ advocate.category }}</td>
                    <td>{{ advocate.city }}</td>
                    <td><span class="status-badge status-completed">Completed</span></td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7">No payment completed advocates found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Payment Pending Advocates -->
    <div class="section">
        <h2 class="text-center">Payment Pending Advocates</h2>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Advocate</th>
                    <th>Photo</th>
                    <th>Phone</th>
                    <th>Category</th>
                    <th>City</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for advocate in pending_advocates %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ advocate.name }}</td>
                    <td><img src="{{ advocate.photo.url }}" class="profile-photo" alt="Advocate Photo"></td>
                    <td>{{ advocate.phone_number }}</td>
                    <td>{{ advocate.category }}</td>
                    <td>{{ advocate.city }}</td>
                    <td><span class="status-badge status-pending">Pending</span></td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7">No payment pending advocates found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
